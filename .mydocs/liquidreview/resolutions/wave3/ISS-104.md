# ISS-104: Ordinal Address Off-by-One Errors

**Category:** Minor Edge Cases
**Priority:** Medium
**Status:** Resolved

## Issue

Are ordinal addresses (`@0`, `@K0`, etc.) 0-indexed or 1-indexed? Ambiguity could cause off-by-one errors when users say "first KPI" vs. "@K0" vs. "@K1".

## Resolution

### Zero-Indexed Ordinal Addresses

**All ordinal addresses in LiquidCode are 0-indexed.**

| Address | Meaning | User Language Equivalent |
|---------|---------|--------------------------|
| `@0` | First block in traversal order | "first block" |
| `@K0` | First KPI | "first KPI" |
| `@[0,0]` | Top-left grid cell | "first row, first column" |
| `@1` | Second block | "second block" |

### Rationale

1. **Consistency with programming**: LiquidCode is LLM output, not human-authored. LLMs are trained on code that uses 0-indexing.
2. **Grid alignment**: Grid positions `@[0,0]` naturally map to row 0, column 0
3. **Array semantics**: Internal traversal uses 0-indexed arrays

### Natural Language Translation

When users provide natural language ("show the first KPI"), the LLM MUST translate to 0-indexed addresses:

| User Input | LLM Translation |
|------------|-----------------|
| "first KPI" | `@K0` |
| "second chart" | `@L1` or `@B1` (whichever appears first) |
| "top-left cell" | `@[0,0]` |
| "third row, second column" | `@[2,1]` |

### Error Prevention

The compiler SHOULD include helpful error messages when addressing fails:

```
Error: Address @K5 not found
Available KPIs: @K0 (Revenue), @K1 (Orders), @K2 (Profit)
Did you mean @K2 (last KPI)?
```

## Specification Impact

**Clarification to ยง8.2 (Block Addressing System):**

Add explicit statement:
> **All ordinal addresses are 0-indexed.** The first block of any type is addressed as index 0 (`@0`, `@K0`, `@[0,0]`), the second as index 1, and so on.

## Related Sections

- ยง8.2: Address Hierarchy
- ยง8.6: Schema Summary for LLM Context
