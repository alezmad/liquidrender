# ISS-105: Long Label Truncation

**Category:** Minor Edge Cases
**Priority:** Low
**Status:** Resolved

## Issue

When L2 polish generates or accepts very long labels (>100 characters), how should they be handled during compilation and rendering?

## Resolution

### Compilation Behavior

**The compiler does NOT truncate labels.** Labels are passed through as-is to the schema, with warnings for excessive length.

| Label Length | Compiler Behavior |
|--------------|-------------------|
| 0-50 chars | No warning |
| 51-100 chars | Warning: `Label may be too long for compact layouts` |
| 101-200 chars | Warning: `Label exceeds recommended length` |
| 201+ chars | Warning: `Label is very long and may impact rendering` |

### Adapter Responsibility

**Adapters are responsible for truncation based on rendering context.**

```typescript
interface RenderOptions {
  maxLabelLength?: number;        // Context-specific limit
  truncationStrategy?: TruncationStrategy;
}

type TruncationStrategy =
  | 'ellipsis'       // "Very long label text..."
  | 'word-boundary'  // "Very long label..."
  | 'tooltip'        // Show truncated, full text in tooltip
  | 'none';          // No truncation
```

### Default Truncation Rules

Adapters SHOULD apply context-aware defaults:

| Context | Max Length | Strategy |
|---------|------------|----------|
| KPI label | 30 chars | ellipsis |
| Chart title | 60 chars | word-boundary |
| Table column header | 40 chars | tooltip |
| Grid cell label | 50 chars | ellipsis |
| Full-screen title | 100 chars | none |

### Schema Validation

Add optional validation in BlockLayout:

```typescript
interface BlockLayout {
  // ... existing fields
  labelConstraints?: {
    maxLength?: number;         // Soft limit for this block
    overflow?: 'truncate' | 'wrap' | 'scroll';
  };
}
```

### LiquidCode Syntax

Labels can optionally specify truncation hints:

```liquidcode
# Default (no hint)
K$revenue

# With truncation hint (L2 polish)
Δ~@K0.label:"Very Long Revenue Label Text"
Δ~@K0.labelConstraints:{maxLength:30,overflow:"truncate"}
```

## Specification Impact

**Minor addition to §11.8 (Block Layout Properties):**

Add `labelConstraints` field to `BlockLayout` interface.

**No change to core compilation.** Truncation is a rendering concern.

## Related Sections

- §5.3: Layer Scope Detection (L2 = polish)
- §11.8: Block Layout Properties
- §18.1: Adapter Interface Contract
