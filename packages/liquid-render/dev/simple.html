<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LiquidUI Simple Preview</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: system-ui, sans-serif; background: #f9fafb; padding: 2rem; }
    h1 { margin-bottom: 0.5rem; }
    .subtitle { color: #6b7280; margin-bottom: 1.5rem; }
    .dsl { background: #1f2937; color: #10b981; padding: 1rem; border-radius: 0.5rem; font-family: monospace; margin-bottom: 2rem; white-space: pre; }
    .badge { background: #10b981; color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem; margin-left: 0.5rem; }
    .kpi-group { display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem; }
    .kpi { padding: 1rem; border-radius: 0.5rem; background: #f3f4f6; border: 1px solid #e5e7eb; flex: 1 1 150px; }
    .kpi-label { font-size: 0.875rem; color: #6b7280; margin-bottom: 0.25rem; }
    .kpi-value { font-size: 1.875rem; font-weight: 600; color: #111827; }
    .chart { background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem; min-height: 200px; }
    .bar-chart { display: flex; align-items: flex-end; gap: 0.5rem; height: 180px; padding-top: 1rem; }
    .bar { background: #3b82f6; border-radius: 4px 4px 0 0; flex: 1; transition: all 0.2s; cursor: pointer; position: relative; }
    .bar:hover { background: #2563eb; }
    .bar-label { position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; color: #6b7280; }
    .bar-value { position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; font-weight: 500; }
    table { width: 100%; border-collapse: collapse; font-size: 0.875rem; background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; overflow: hidden; }
    th { padding: 0.75rem 1rem; text-align: left; font-weight: 500; background: #f9fafb; border-bottom: 1px solid #e5e7eb; }
    td { padding: 0.75rem 1rem; border-bottom: 1px solid #e5e7eb; }
    tr:last-child td { border-bottom: none; }
    .status { padding: 0.25rem 0.5rem; border-radius: 9999px; font-size: 0.75rem; }
    .status-completed { background: #d1fae5; color: #065f46; }
    .status-pending { background: #fef3c7; color: #92400e; }
  </style>
</head>
<body>
  <h1>LiquidUI Dashboard<span class="badge">Interactive</span></h1>
  <p class="subtitle">Rendered from ultra-minimal DSL with implicit field detection</p>
  <div class="dsl">Kp :summary
Ln :monthly
Br :monthly
Tb :transactions</div>
  <div id="root"></div>

  <script>
    const h = React.createElement;

    const data = {
      summary: { revenue: 832000, orders: 2248, customers: 1694, growth: 0.14 },
      monthly: [
        { month: 'Jan', revenue: 45000, orders: 120 },
        { month: 'Feb', revenue: 52000, orders: 145 },
        { month: 'Mar', revenue: 48000, orders: 132 },
        { month: 'Apr', revenue: 61000, orders: 168 },
        { month: 'May', revenue: 58000, orders: 155 },
        { month: 'Jun', revenue: 67000, orders: 182 },
      ],
      transactions: [
        { date: '2024-06-15', customer: 'Acme Corp', amount: 12500, status: 'Completed' },
        { date: '2024-06-14', customer: 'TechStart', amount: 8900, status: 'Completed' },
        { date: '2024-06-14', customer: 'Global Inc', amount: 15200, status: 'Pending' },
        { date: '2024-06-13', customer: 'StartupXYZ', amount: 4500, status: 'Completed' },
        { date: '2024-06-12', customer: 'MegaCorp', amount: 28000, status: 'Completed' },
      ],
    };

    const fmt = v => typeof v === 'number' ? (v >= 1000 ? '$' + v.toLocaleString() : v < 1 ? (v*100).toFixed(1)+'%' : v.toLocaleString()) : v;
    const label = f => f.replace(/_/g,' ').replace(/([a-z])([A-Z])/g,'$1 $2').split(' ').map(w=>w[0].toUpperCase()+w.slice(1)).join(' ');

    function KPIs({ obj }) {
      return h('div', { className: 'kpi-group' },
        Object.entries(obj).filter(([_,v]) => typeof v === 'number').map(([k,v]) =>
          h('div', { key: k, className: 'kpi' },
            h('div', { className: 'kpi-label' }, label(k)),
            h('div', { className: 'kpi-value' }, fmt(v))
          )
        )
      );
    }

    function BarChart({ data, xKey, yKey }) {
      const max = Math.max(...data.map(d => d[yKey]));
      return h('div', { className: 'chart' },
        h('div', { className: 'bar-chart' },
          data.map((d, i) =>
            h('div', {
              key: i,
              className: 'bar',
              style: { height: (d[yKey] / max * 100) + '%' },
              title: `${d[xKey]}: ${fmt(d[yKey])}`
            },
              h('span', { className: 'bar-value' }, fmt(d[yKey])),
              h('span', { className: 'bar-label' }, d[xKey])
            )
          )
        )
      );
    }

    function Table({ data }) {
      const cols = Object.keys(data[0]);
      return h('table', null,
        h('thead', null, h('tr', null, cols.map(c => h('th', { key: c }, label(c))))),
        h('tbody', null, data.map((row, i) =>
          h('tr', { key: i }, cols.map(c =>
            h('td', { key: c },
              c === 'status'
                ? h('span', { className: 'status status-' + row[c].toLowerCase() }, row[c])
                : fmt(row[c])
            )
          ))
        ))
      );
    }

    function App() {
      return h('div', null,
        h(KPIs, { obj: data.summary }),
        h('h3', { style: { margin: '1rem 0 0.5rem' } }, 'Revenue by Month'),
        h(BarChart, { data: data.monthly, xKey: 'month', yKey: 'revenue' }),
        h('h3', { style: { margin: '1rem 0 0.5rem' } }, 'Orders by Month'),
        h(BarChart, { data: data.monthly, xKey: 'month', yKey: 'orders' }),
        h('h3', { style: { margin: '1rem 0 0.5rem' } }, 'Recent Transactions'),
        h(Table, { data: data.transactions })
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(h(App));
  </script>
</body>
</html>
